webpackJsonp([0],{"3cXf":function(e,t,n){e.exports={default:n("4rP4"),__esModule:!0}},"4rP4":function(e,t,n){var s=n("UusJ"),o=s.JSON||(s.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},UusJ:function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},VZrM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("3cXf"),o=n.n(s),r=n("yy5y"),i={data:function(){return{url:"ws://lp-ws.herokuapp.com/"+this.$route.params.id,ws:null,msg:null,list:[],closed:!0,error:!1,timeout:5e3,timeoutObj:null,serverTimeoutObj:null}},mounted:function(){this.connect()},methods:{resetHert:function(){clearTimeout(this.timeoutObj),clearTimeout(this.serverTimeoutObj),this.startHert()},startHert:function(){var e=this;this.timeoutObj=setTimeout(function(){e.ws.send(o()({check:!0,msg:"check"})),e.serverTimeoutObj=setTimeout(function(){e.ws.close(),e.connect()},e.timeout)},e.timeout)},connect:function(){var e=this;this.ws=this.createWS(this.url),this.ws.onopen=function(){e.closed=!1,e.startHert()},this.ws.onmessage=function(t){e.resetHert();try{t=JSON.parse(t.data)}catch(e){t=t.data}t.check||e.list.push({type:1,msg:t,time:Object(r.a)(new Date)})},this.ws.onclose=function(){e.error?setTimeout(function(){e.connect()},e.timeout):e.connect(),e.closed=!0,e.error=!1},this.ws.onerror=function(){e.error=!0}},createWS:function(e){return window.WebSocket?new WebSocket(e):!!window.MozWebSocket&&new MozWebSocket(e)},send:function(){this.list.push({type:0,msg:this.msg,time:Object(r.a)(new Date)}),this.ws.send(this.msg),this.msg=null}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{type:"text"},domProps:{value:e.msg},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.send(t):null},input:function(t){t.target.composing||(e.msg=t.target.value)}}}),e._v(" "),e.closed?n("span",[e._v("连接中...")]):n("span",[e._v("已连接")]),e._v(" "),n("div",[n("ul",e._l(e.list,function(t){return n("li",[e._v("\n        "+e._s(t.time)+"=>"+e._s(t.msg)+"\n      ")])}))])])},staticRenderFns:[]},c=n("Z0/y")(i,u,!1,null,null,null);t.default=c.exports},yy5y:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss",n={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var s in/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"}[e.getDay()+""])),n)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return t}}});
//# sourceMappingURL=0.880bca596c126ed9ae05.js.map